!function(e){"use strict";function t(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e){return e instanceof Function}function i(e){return!n(e)&&e instanceof Object}function o(e,n){var a;for(a in n)i(n[a])||t(n[a])?(i(n[a])&&!i(e[a])&&(e[a]={}),t(n[a])&&!t(e[a])&&(e[a]=[]),o(e[a],n[a])):void 0!==n[a]&&(e[a]=n[a])}function a(e,t){var n={};return o(n,e),o(n,t),n}function r(e){var t,n,i,o,a,r,s,l,c,d,u;return d=Object.prototype.toString.call(e),"[object Date]"===d?e:"[object String]"===d?(i=e.match(W),i?(u=parseInt(i[1],10),r=parseInt(i[3],10)-1,t=parseInt(i[5],10),n=parseInt(i[7],10),a=i[9]?parseInt(i[9],10):0,c=i[11]?parseInt(i[11],10):0,o=i[12]?1e3*parseFloat(j+i[12].slice(1)):0,l=Date.UTC(u,r,t,n,a,c,o),i[13]&&i[14]&&(s=60*i[15],i[17]&&(s+=parseInt(i[17],10)),s*="-"===i[14]?-1:1,l-=60*s*1e3),new Date(l)):void 0):void 0}function s(e){var t,n,i;for(t=0;t<e.length;t++)for(i=e[t].data,n=0;n<i.length;n++)if(i[n][1]<0)return!0;return!1}function l(e,t,n,i,o,r,l){return function(c,d,u){var h=a({},e);return h=a(h,u||{}),d.hideLegend&&t(h),"min"in d?n(h,d.min):s(c)||n(h,0),d.max&&i(h,d.max),"stacked"in d&&o(h,d.stacked),d.colors&&(h.colors=d.colors),d.xtitle&&r(h,d.xtitle),d.ytitle&&l(h,d.ytitle),h=a(h,d.library||{})}}function c(e,t){document.body.innerText?e.innerText=t:e.textContent=t}function d(e,t){c(e,"Error Loading Chart: "+t),e.style.color="#ff0000"}function u(t,n,i){var o=e.jQuery||e.Zepto||e.$;o.ajax({dataType:"json",url:n,success:i,error:function(e,n,i){var o="string"==typeof i?i:i.message;d(t,o)}})}function h(e,t){try{t(e)}catch(n){throw d(e.element,n.message),n}}function f(e,t){"string"==typeof e.dataSource?u(e.element,e.dataSource,function(n){e.data=n,h(e,t)}):(e.data=e.dataSource,h(e,t))}function p(e){return""+e}function m(e){return parseFloat(e)}function g(e){var t,n,i,o;if("object"!=typeof e)if("number"==typeof e)e=new Date(1e3*e);else{if(t=e.match(Z))return n=parseInt(t[1],10),i=parseInt(t[3],10)-1,o=parseInt(t[5],10),new Date(n,i,o);var a=e.replace(/ /,"T").replace(" ","").replace("UTC","Z");e=r(a)||new Date(e)}return e}function E(e){if(!t(e)){var n,i=[];for(n in e)e.hasOwnProperty(n)&&i.push([n,e[n]]);e=i}return e}function v(e,t){return e[0].getTime()-t[0].getTime()}function T(e,t){return e-t}function C(){!U&&"Highcharts"in e&&(U=new function(){var t=e.Highcharts;this.name="highcharts";var n={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},series:{marker:{}}}},i=function(e){e.legend.enabled=!1},o=function(e,t){e.yAxis.min=t},r=function(e,t){e.yAxis.max=t},s=function(e,t){e.plotOptions.series.stacking=t?"normal":null},c=function(e,t){e.xAxis.title.text=t},d=function(e,t){e.yAxis.title.text=t},u=l(n,i,o,r,s,c,d);this.renderLineChart=function(e,n){n=n||"spline";var i={};"areaspline"===n&&(i={plotOptions:{areaspline:{stacking:"normal"},series:{marker:{enabled:!1}}}});var o,a,r,s=u(e.data,e.options,i);s.xAxis.type=e.options.discrete?"category":"datetime",s.chart.type=n,s.chart.renderTo=e.element.id;var l=e.data;for(a=0;a<l.length;a++){if(o=l[a].data,!e.options.discrete)for(r=0;r<o.length;r++)o[r][0]=o[r][0].getTime();l[a].marker={symbol:"circle"}}s.series=l,new t.Chart(s)},this.renderScatterChart=function(e){var n={},i=u(e.data,e.options,n);i.chart.type="scatter",i.chart.renderTo=e.element.id,i.series=e.data,new t.Chart(i)},this.renderPieChart=function(e){var i={};e.options.colors&&(i.colors=e.options.colors);var o=a(a(n,i),e.options.library||{});o.chart.renderTo=e.element.id,o.series=[{type:"pie",name:e.options.label||"Value",data:e.data}],new t.Chart(o)},this.renderColumnChart=function(e,n){n=n||"column";var i,o,a,r,s=e.data,l=u(s,e.options),c=[];for(l.chart.type=n,l.chart.renderTo=e.element.id,i=0;i<s.length;i++)for(a=s[i],o=0;o<a.data.length;o++)r=a.data[o],c[r[0]]||(c[r[0]]=new Array(s.length)),c[r[0]][i]=r[1];var d=[];for(i in c)c.hasOwnProperty(i)&&d.push(i);l.xAxis.categories=d;var h=[];for(i=0;i<s.length;i++){for(r=[],o=0;o<d.length;o++)r.push(c[d[o]][i]||0);h.push({name:s[i].name,data:r})}l.series=h,new t.Chart(l)};var h=this;this.renderBarChart=function(e){h.renderColumnChart(e,"bar")},this.renderAreaChart=function(e){h.renderLineChart(e,"areaspline")}},X.push(U)),!V&&e.google&&e.google.setOnLoadCallback&&(V=new function(){var t=e.google;this.name="google";var n={},i=[],o=function(){for(var e,n,o=0;o<i.length;o++)e=i[o],n=t.visualization&&("corechart"===e.pack&&t.visualization.LineChart||"timeline"===e.pack&&t.visualization.Timeline),n&&(e.callback(),i.splice(o,1),o--)},r=function(e,a){if(a||(a=e,e="corechart"),i.push({pack:e,callback:a}),n[e])o();else{n[e]=!0;var r={packages:[e],callback:o};Y.language&&(r.language=Y.language),t.load("visualization","1",r)}},s={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},c=function(e){e.legend.position="none"},d=function(e,t){e.vAxis.viewWindow.min=t},u=function(e,t){e.vAxis.viewWindow.max=t},h=function(e,t){e.hAxis.viewWindow.min=t},f=function(e,t){e.hAxis.viewWindow.max=t},p=function(e,t){e.isStacked=!!t},g=function(e,t){e.hAxis.title=t,e.hAxis.titleTextStyle.italic=!1},E=function(e,t){e.vAxis.title=t,e.vAxis.titleTextStyle.italic=!1},T=l(s,c,d,u,p,g,E),C=function(e,n){var i,o,a,r,s,l=[];for(i=0;i<e.length;i++)for(a=e[i],o=0;o<a.data.length;o++)r=a.data[o],s="datetime"===n?r[0].getTime():r[0],l[s]||(l[s]=new Array(e.length)),l[s][i]=m(r[1]);var c,d=[],u=!0;for(i in l)l.hasOwnProperty(i)&&("datetime"===n?(c=new Date(m(i)),u=u&&D(c)):c="number"===n?m(i):i,d.push([c].concat(l[i])));"datetime"===n&&d.sort(v);var h=new t.visualization.DataTable;for(n="datetime"===n&&u?"date":n,h.addColumn(n,""),i=0;i<e.length;i++)h.addColumn("number",e[i].name);return h.addRows(d),h},b=function(t){e.attachEvent?e.attachEvent("onresize",t):e.addEventListener&&e.addEventListener("resize",t,!0),t()};this.renderLineChart=function(e){r(function(){var n=T(e.data,e.options),i=C(e.data,e.options.discrete?"string":"datetime");e.chart=new t.visualization.LineChart(e.element),b(function(){e.chart.draw(i,n)})})},this.renderPieChart=function(e){r(function(){var n={chartArea:{top:"10%",height:"80%"}};e.options.colors&&(n.colors=e.options.colors);var i=a(a(s,n),e.options.library||{}),o=new t.visualization.DataTable;o.addColumn("string",""),o.addColumn("number","Value"),o.addRows(e.data),e.chart=new t.visualization.PieChart(e.element),b(function(){e.chart.draw(o,i)})})},this.renderColumnChart=function(e){r(function(){var n=T(e.data,e.options),i=C(e.data,"string");e.chart=new t.visualization.ColumnChart(e.element),b(function(){e.chart.draw(i,n)})})},this.renderBarChart=function(e){r(function(){var n={hAxis:{gridlines:{color:"#ccc"}}},i=l(s,c,h,f,p)(e.data,e.options,n),o=C(e.data,"string");e.chart=new t.visualization.BarChart(e.element),b(function(){e.chart.draw(o,i)})})},this.renderAreaChart=function(e){r(function(){var n={isStacked:!0,pointSize:0,areaOpacity:.5},i=T(e.data,e.options,n),o=C(e.data,e.options.discrete?"string":"datetime");e.chart=new t.visualization.AreaChart(e.element),b(function(){e.chart.draw(o,i)})})},this.renderGeoChart=function(e){r(function(){var n={legend:"none",colorAxis:{colors:e.options.colors||["#f6c7b6","#ce502d"]}},i=a(a(s,n),e.options.library||{}),o=new t.visualization.DataTable;o.addColumn("string",""),o.addColumn("number",e.options.label||"Value"),o.addRows(e.data),e.chart=new t.visualization.GeoChart(e.element),b(function(){e.chart.draw(o,i)})})},this.renderScatterChart=function(e){r(function(){var n={},i=T(e.data,e.options,n),o=C(e.data,"number");e.chart=new t.visualization.ScatterChart(e.element),b(function(){e.chart.draw(o,i)})})},this.renderTimeline=function(e){r("timeline",function(){var n={legend:"none"};e.options.colors&&(n.colors=e.options.colors);var i=a(a(s,n),e.options.library||{}),o=new t.visualization.DataTable;o.addColumn({type:"string",id:"Name"}),o.addColumn({type:"date",id:"Start"}),o.addColumn({type:"date",id:"End"}),o.addRows(e.data),e.element.style.lineHeight="normal",e.chart=new t.visualization.Timeline(e.element),b(function(){e.chart.draw(o,i)})})}},X.push(V)),!G&&"Chart"in e&&(G=new function(){var t=e.Chart;this.name="chartjs";var n={maintainAspectRatio:!1,animation:!1},i={scales:{yAxes:[{ticks:{maxTicksLimit:4},scaleLabel:{fontSize:16,fontColor:"#333"}}],xAxes:[{gridLines:{drawOnChartArea:!1},scaleLabel:{fontSize:16,fontColor:"#333"},time:{},ticks:{}}]},legend:{}},o=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],r=function(e){e.legend.display=!1},s=function(e,t){null!==t&&(e.scales.yAxes[0].ticks.min=t)},c=function(e,t){e.scales.yAxes[0].ticks.max=t},d=function(e,t){null!==t&&(e.scales.xAxes[0].ticks.min=t)},u=function(e,t){e.scales.xAxes[0].ticks.max=t},h=function(e,t){e.scales.xAxes[0].stacked=!!t,e.scales.yAxes[0].stacked=!!t},f=function(e,t){e.scales.xAxes[0].scaleLabel.display=!0,e.scales.xAxes[0].scaleLabel.labelString=t},g=function(e,t){e.scales.yAxes[0].scaleLabel.display=!0,e.scales.yAxes[0].scaleLabel.labelString=t},E=function(e,n,i,o){e.element.innerHTML="<canvas></canvas>";var a=e.element.getElementsByTagName("CANVAS")[0];e.chart=new t(a,{type:n,data:i,options:o})},v=function(e,t){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?"rgba("+parseInt(n[1],16)+", "+parseInt(n[2],16)+", "+parseInt(n[3],16)+", "+t+")":e},C=function(e,t,n){var i=Math.ceil(e.element.offsetWidth/4/t.labels.length);n.scales.xAxes[0].ticks.callback=function(e){return e=p(e),e.length>i?e.substring(0,i-2)+"...":e}},b=l(a(n,i),r,s,c,h,f,g),k=function(e,t,n){var i,r,s,l,c,d,u=[],h=[],f=e.options.colors||o,p=!0,g=!0,E=!0,C=!0,b=!0,k=!0,K=("line"===n||"area"===n)&&!e.options.discrete,w=e.data,x=[],S=[];for(r=0;r<w.length;r++)for(l=w[r],s=0;s<l.data.length;s++)c=l.data[s],d=K?c[0].getTime():c[0],S[d]||(S[d]=new Array(w.length)),S[d][r]=m(c[1]),-1===x.indexOf(d)&&x.push(d);K&&x.sort(T);var N=[];for(s=0;s<w.length;s++)N.push([]);var A,L;for(L=0;L<x.length;L++)for(r=x[L],K?(A=new Date(m(r)),p=p&&D(A),i||(i=A.getDay()),g=g&&O(A,i),E=E&&_(A),C=C&&R(A),b=b&&y(A),k=k&&I(A)):A=r,h.push(A),s=0;s<w.length;s++)N[s].push(S[r][s]);for(r=0;r<w.length;r++){l=w[r];var P="line"!==n?v(f[r],.5):f[r],F={label:l.name,data:N[r],fill:"area"===n,borderColor:f[r],backgroundColor:P,pointBackgroundColor:f[r],borderWidth:2};u.push(a(F,l.library||{}))}if(K&&h.length>0){var M=h[0].getTime(),B=h[0].getTime();for(r=1;r<h.length;r++)A=h[r].getTime(),M>A&&(M=A),A>B&&(B=A);var $=(B-M)/864e5;if(!t.scales.xAxes[0].time.unit){var H;if(C||$>3650?(t.scales.xAxes[0].time.unit="year",H=365):E||$>300?(t.scales.xAxes[0].time.unit="month",H=30):p||$>10?(t.scales.xAxes[0].time.unit="day",H=1):b?(t.scales.xAxes[0].time.unit="hour",H=1/24):k&&(t.scales.xAxes[0].time.displayFormats={minute:"h:mm a"},t.scales.xAxes[0].time.unit="minute",H=1/24/60),H&&$>0){var q=Math.ceil($/H/(e.element.offsetWidth/100));g&&(q=7*Math.ceil(q/7)),t.scales.xAxes[0].time.unitStepSize=q}}t.scales.xAxes[0].time.tooltipFormat||(p?t.scales.xAxes[0].time.tooltipFormat="ll":b?t.scales.xAxes[0].time.tooltipFormat="MMM D, h a":k&&(t.scales.xAxes[0].time.tooltipFormat="h:mm a"))}var z={labels:h,datasets:u};return z};this.renderLineChart=function(e,t){var n={};!e.options.max&&K(e.data)&&(e.options.max=1);var i=b(e.data,a(n,e.options)),o=k(e,i,t||"line");i.scales.xAxes[0].type=e.options.discrete?"category":"time",E(e,"line",o,i)},this.renderPieChart=function(e){for(var t=a(n,e.options.library||{}),i=[],r=[],s=0;s<e.data.length;s++){var l=e.data[s];i.push(l[0]),r.push(l[1])}var c={labels:i,datasets:[{data:r,backgroundColor:e.options.colors||o}]};E(e,"pie",c,t)},this.renderColumnChart=function(e,t){var o;o="bar"===t?l(a(n,i),r,d,u,h)(e.data,e.options):b(e.data,e.options);var s=k(e,o,"column");C(e,s,o),E(e,"bar"===t?"horizontalBar":"bar",s,o)};var w=this;this.renderAreaChart=function(e){w.renderLineChart(e,"area")},this.renderBarChart=function(e){w.renderColumnChart(e,"bar")}},X.unshift(G))}function b(e,t){var i,o,a,r;for(a="render"+e,r=t.options.adapter,C(),i=0;i<X.length;i++)if(o=X[i],(!r||r===o.name)&&n(o[a]))return o[a](t);throw new Error("No adapter found")}function I(e){return 0===e.getMilliseconds()&&0===e.getSeconds()}function y(e){return I(e)&&0===e.getMinutes()}function D(e){return y(e)&&0===e.getHours()}function O(e,t){return D(e)&&e.getDay()===t}function _(e){return D(e)&&1===e.getDate()}function R(e){return _(e)&&0===e.getMonth()}function k(e){return!isNaN(g(e))&&p(e).length>=6}function K(e){var t,n,i;for(t=0;t<e.length;t++)for(i=e[t].data,n=0;n<i.length;n++)if(0!=i[n][1])return!1;return!0}function w(e){var t,n,i;for(t=0;t<e.length;t++)for(i=E(e[t].data),n=0;n<i.length;n++)if(!k(i[n][0]))return!0;return!1}function x(e,n,i){var o;for(!t(e)||"object"!=typeof e[0]||t(e[0])?(e=[{name:n.label||"Value",data:e}],n.hideLegend=!0):n.hideLegend=!1,null!==n.discrete&&void 0!==n.discrete||(n.discrete=w(e)),n.discrete&&(i="string"),o=0;o<e.length;o++)e[o].data=Q(E(e[o].data),i);return e}function S(e){var t,n=E(e);for(t=0;t<n.length;t++)n[t]=[p(n[t][0]),m(n[t][1])];return n}function N(e){var t;for(t=0;t<e.length;t++)e[t][1]=g(e[t][1]),e[t][2]=g(e[t][2]);return e}function A(e){e.data=x(e.data,e.options,"datetime"),b("LineChart",e)}function L(e){e.data=x(e.data,e.options,"string"),b("ColumnChart",e)}function P(e){e.data=S(e.data),b("PieChart",e)}function F(e){e.data=x(e.data,e.options,"string"),b("BarChart",e)}function M(e){e.data=x(e.data,e.options,"datetime"),b("AreaChart",e)}function B(e){e.data=S(e.data),b("GeoChart",e)}function $(e){e.data=x(e.data,e.options,"number"),b("ScatterChart",e)}function H(e){e.data=N(e.data),b("Timeline",e)}function q(e,t,n,i,o){"string"==typeof t&&(t=document.getElementById(t)),e.element=t,e.options=i||{},e.dataSource=n,e.getElement=function(){return t},e.getData=function(){return e.data},e.getOptions=function(){return i||{}},e.getChartObject=function(){return e.chart},z.charts[t.id]=e,f(e,o)}var z,W,j,V,U,G,Y=e.Chartkick||{},X=[],Z=/^(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)$/i;W=/(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)(T)?(\d\d)(:)?(\d\d)?(:)?(\d\d)?([\.,]\d+)?($|Z|([\+\-])(\d\d)(:)?(\d\d)?)/i,j=String(1.5).charAt(1);var J=function(e,t){return e="number"===t?m(e):"datetime"===t?g(e):p(e)},Q=function(e,t){var n,i,o=[];for(i=0;i<e.length;i++)n=J(e[i][0],t),o.push([n,m(e[i][1])]);return"datetime"===t&&o.sort(v),o};z={LineChart:function(e,t,n){q(this,e,t,n,A)},PieChart:function(e,t,n){q(this,e,t,n,P)},ColumnChart:function(e,t,n){q(this,e,t,n,L)},BarChart:function(e,t,n){q(this,e,t,n,F)},AreaChart:function(e,t,n){q(this,e,t,n,M)},GeoChart:function(e,t,n){q(this,e,t,n,B)},ScatterChart:function(e,t,n){q(this,e,t,n,$)},Timeline:function(e,t,n){q(this,e,t,n,H)},charts:{}},"object"==typeof module&&"object"==typeof module.exports?module.exports=z:e.Chartkick=z}(window);